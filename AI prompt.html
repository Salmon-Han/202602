<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æç¤ºè©åº«</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #f3f4f6; padding-bottom: 80px; }
        .card-img { width: 100%; height: 200px; object-fit: cover; border-radius: 8px 8px 0 0; }
        .toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #333; color: #fff; padding: 10px 20px; border-radius: 20px; opacity: 0; transition: opacity 0.3s; pointer-events: none; }
        .toast.show { opacity: 1; }
    </style>
</head>
<body>

    <div class="bg-blue-600 text-white p-4 shadow-md sticky top-0 z-10">
        <h1 class="text-xl font-bold text-center">ğŸ¨ AI ç¹ªåœ–æç¤ºè©åº«</h1>
    </div>

    <div id="app" class="p-4 max-w-md mx-auto space-y-4">
        <div id="empty-state" class="text-center text-gray-400 mt-10 hidden">
            <p>é‚„æ²’æœ‰è³‡æ–™ï¼Œé»æ“Šä¸‹æ–¹æŒ‰éˆ•æ–°å¢ï¼</p>
        </div>
    </div>

    <div class="fixed bottom-6 right-6">
        <button onclick="openModal()" class="bg-blue-600 hover:bg-blue-700 text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg text-3xl font-bold">+</button>
    </div>

    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-lg w-full max-w-md p-6 shadow-xl">
            <h2 class="text-xl font-bold mb-4">æ–°å¢æç¤ºè©</h2>
            
            <label class="block text-sm font-medium text-gray-700">åœ–ç‰‡é€£çµ (URL)</label>
            <input type="text" id="input-img" placeholder="è²¼ä¸Šåœ–ç‰‡ç¶²å€..." class="mt-1 block w-full border border-gray-300 rounded-md p-2 mb-3">
            
            <label class="block text-sm font-medium text-gray-700">æç¤ºè© (Prompts)</label>
            <textarea id="input-prompt" rows="4" placeholder="è¼¸å…¥è‹±æ–‡æç¤ºè©..." class="mt-1 block w-full border border-gray-300 rounded-md p-2 mb-4"></textarea>

            <div class="flex justify-end space-x-3">
                <button onclick="closeModal()" class="px-4 py-2 text-gray-500 hover:text-gray-700">å–æ¶ˆ</button>
                <button onclick="saveData()" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">å„²å­˜</button>
            </div>
        </div>
    </div>

    <div id="toast" class="toast">âœ… å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿</div>

    <script>
        // 1. åˆå§‹åŒ–ï¼šè®€å–è³‡æ–™
        let prompts = JSON.parse(localStorage.getItem('ai_prompts')) || [];
        
        function render() {
            const app = document.getElementById('app');
            const emptyState = document.getElementById('empty-state');
            app.innerHTML = ''; // æ¸…ç©ºç•«é¢
            
            if (prompts.length === 0) {
                app.appendChild(emptyState);
                emptyState.classList.remove('hidden');
                return;
            }
            emptyState.classList.add('hidden');

            // å€’åºæ’åˆ—ï¼Œæ–°çš„åœ¨ä¸Šé¢
            prompts.slice().reverse().forEach((item, index) => {
                // æ‰¾å‡ºåŸå§‹é™£åˆ—ä¸­çš„æ­£ç¢ºç´¢å¼•
                const originalIndex = prompts.length - 1 - index;
                
                const card = document.createElement('div');
                card.className = 'bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden';
                
                // å¦‚æœæ²’æœ‰åœ–ç‰‡ç¶²å€ï¼Œé¡¯ç¤ºé è¨­åœ–
                const imgDisplay = item.img ? `<img src="${item.img}" class="card-img">` : `<div class="h-20 bg-gray-200 flex items-center justify-center text-gray-400">ç„¡åœ–ç‰‡</div>`;

                card.innerHTML = `
                    ${imgDisplay}
                    <div class="p-4">
                        <div class="text-gray-800 text-sm mb-3 bg-gray-50 p-2 rounded border border-gray-100 font-mono break-all">${item.text}</div>
                        <div class="flex justify-between items-center mt-2">
                            <button onclick="deleteItem(${originalIndex})" class="text-red-400 text-sm hover:text-red-600">åˆªé™¤</button>
                            <button onclick="copyText('${item.text.replace(/'/g, "\\'")}')" class="bg-gray-800 text-white px-4 py-2 rounded-md text-sm font-bold active:scale-95 transition-transform">ğŸ“‹ è¤‡è£½æç¤ºè©</button>
                        </div>
                    </div>
                `;
                app.appendChild(card);
            });
        }

        // 2. å„²å­˜è³‡æ–™
        function saveData() {
            const img = document.getElementById('input-img').value;
            const text = document.getElementById('input-prompt').value;

            if (!text) { alert('è«‹è‡³å°‘è¼¸å…¥æç¤ºè©'); return; }

            prompts.push({ img, text });
            localStorage.setItem('ai_prompts', JSON.stringify(prompts));
            
            closeModal();
            render();
            
            // æ¸…ç©ºè¼¸å…¥æ¡†
            document.getElementById('input-img').value = '';
            document.getElementById('input-prompt').value = '';
        }

        // 3. åˆªé™¤è³‡æ–™
        function deleteItem(index) {
            if(confirm('ç¢ºå®šè¦åˆªé™¤é€™ç­†è³‡æ–™å—ï¼Ÿ')) {
                prompts.splice(index, 1);
                localStorage.setItem('ai_prompts', JSON.stringify(prompts));
                render();
            }
        }

        // 4. è¤‡è£½åŠŸèƒ½
        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast();
            });
        }

        // UI æ§åˆ¶å‡½å¼
        function openModal() { document.getElementById('modal').classList.remove('hidden'); }
        function closeModal() { document.getElementById('modal').classList.add('hidden'); }
        function showToast() {
            const toast = document.getElementById('toast');
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        // å•Ÿå‹•
        render();
    </script>
</body>
</html>
